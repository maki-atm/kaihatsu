<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>ToDo</title>
<link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">


</head>
<body>
<span th:replace="menu"></span>

	<h2>未達成タスク</h2>
	<font color="orange">
<span th:replace="time" id="body"></span>
<br>
</font>
	<div class="right">

	<form action="/todo" method="post">
		<select name="sort">
			<option value="DATE">期限の早い順</option>
			<option value="PRIORITY">優先度の高い順</option>
		</select>
		<input type="submit" value="並べ替え" class="button">
	</form>

	<div class="countTask">
	<a th:text="本日のタスクは" ></a>
	<font color="blue" size="20" th:text="${countTask}"></font>
	<a th:text=" 件です"></a></div>
	<br>

	<form action="/search" method="post">
		<input type="text" name="keyword" th:value="${keyword}" placeholder="search for task">
		<input type="submit" value="検索" class="button">
	</form>

    </div>

     <br>

<div style="display:inline-flex">
	<table border="1">
		<tr id="title">
			<th id="CHECK">実行済み</th>
			<th id="TEXT">タスク</th>
			<th colspan="2">期限</th>
			<th id="PLACE">場所</th>
			<th id="PRI">優先度</th>
			<th id="EDIT">編集</th>
			<th id="DEL">削除</th>
		</tr>

		<span  th:each="task:${t}">
		<tr >

			<form th:action="'/todo/'+${task.code}+'/completed'">
				<td><input type="submit" value="✓" class="button"></td>
			</form>

				<td  th:text="${task.text}" id="TEXT" style="color:'${task.color}';" ></td>
			    <td th:text="${#dates.format(task.date, 'y年M月d日')}"></td>

			    <td th:text="${#dates.format(task.time, 'H:mm')}"></td>
				<td th:text="${task.place}"></td>
                <td  th:text="${task.priority}"></td>
			<form th:action="'/todo/'+${task.code}+'/edit'">
				<td ><input type="submit" value="編集" class="button"></td>
			</form>

			<form action="/todo/delete" method="post">
				<input type="hidden" name="code" th:value="${task.code}">
				<td ><input type="submit" value="×" class="button"></td>
			</form>
		</tr>
		</span>

	</table>

	<table id="t">
	<tr><th>残り日数</th></tr>
	 <tr th:each="list:${list}">
	 <td th:text="${list}+'日'"></td>
	 </tr>
	</table>

</div>
	<br>

</body>
</html>